name: intake_structured_summary
version: 1.0.0
description: Converts raw request text into structured JSON with summary, intent, urgency, and action items

inputs:
  type: object
  properties:
    request_text:
      type: string
      description: Raw text of the incoming request or ticket
  required:
    - request_text

outputs:
  type: object
  properties:
    summary:
      type: string
      description: Brief summary of the request
    intent:
      type: string
      description: Primary intent or category (e.g., "support", "feature_request", "bug_report")
    urgency:
      type: string
      enum: ["low", "medium", "high", "critical"]
      description: Urgency level assessment
    action_items:
      type: array
      items:
        type: string
      description: List of recommended action items
  required:
    - summary
    - intent
    - urgency
    - action_items

task:
  type: model

model:
  provider: ollama
  model_name: llama3.2:1b
  temperature: 0.3
  max_tokens: 1500

prompt: |
  Analyze the following request and extract structured information.
  
  Request Text:
  {{inputs.request_text}}
  
  Provide a JSON response with the following structure:
  {
    "summary": "A brief 2-3 sentence summary of the request",
    "intent": "The primary intent (e.g., support, feature_request, bug_report, question)",
    "urgency": "One of: low, medium, high, critical",
    "action_items": ["Action 1", "Action 2", "Action 3"]
  }
  
  Guidelines:
  - Summary should be concise and capture the essence of the request
  - Intent should be a single category that best describes the request
  - Urgency should reflect the business impact and time sensitivity
  - Action items should be specific, actionable steps (3-5 items)
  
  Return only valid JSON, no additional text.

guardrails:
  - type: no_network_access
    enabled: true
  - type: no_filesystem_access
    enabled: true
  - type: max_output_length
    value: 2000

observability:
  logging:
    enabled: true
    level: info
  metrics:
    enabled: true
    track_latency: true
